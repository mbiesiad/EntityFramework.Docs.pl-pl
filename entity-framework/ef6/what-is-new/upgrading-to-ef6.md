---
title: Uaktualnianie do Entity Framework 6 EF6
author: divega
ms.date: 10/23/2016
ms.assetid: 29958ae5-85d3-4585-9ba6-550b8ec9393a
ms.openlocfilehash: 4395a9c117a6cf38e7fc08f11ee689d6fffa6fed
ms.sourcegitcommit: 708b18520321c587b2046ad2ea9fa7c48aeebfe5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/09/2019
ms.locfileid: "72182099"
---
# <a name="upgrading-to-entity-framework-6"></a><span data-ttu-id="fc74b-102">Uaktualnianie do Entity Framework 6</span><span class="sxs-lookup"><span data-stu-id="fc74b-102">Upgrading to Entity Framework 6</span></span>

<span data-ttu-id="fc74b-103">W poprzednich wersjach EF kod został podzielony między biblioteki podstawowe (przede wszystkim system. Data. Entity. dll), które są dostarczane jako część bibliotek .NET Framework i out-of-Band (EntityFramework. dll) dostarczonych w pakiecie NuGet.</span><span class="sxs-lookup"><span data-stu-id="fc74b-103">In previous versions of EF the code was split between core libraries (primarily System.Data.Entity.dll) shipped as part of the .NET Framework and out-of-band (OOB) libraries (primarily EntityFramework.dll) shipped in a NuGet package.</span></span> <span data-ttu-id="fc74b-104">EF6 Pobiera kod z podstawowych bibliotek i dołącza go do bibliotek OOB.</span><span class="sxs-lookup"><span data-stu-id="fc74b-104">EF6 takes the code from the core libraries and incorporates it into the OOB libraries.</span></span> <span data-ttu-id="fc74b-105">Było to konieczne, aby zapewnić, że EF ma być typu open source i aby można go było rozwijać w innym tempie niż .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="fc74b-105">This was necessary in order to allow EF to be made open source and for it to be able to evolve at a different pace from .NET Framework.</span></span> <span data-ttu-id="fc74b-106">W związku z tym aplikacje muszą być ponownie skompilowane względem przenoszonych typów.</span><span class="sxs-lookup"><span data-stu-id="fc74b-106">The consequence of this is that applications will need to be rebuilt against the moved types.</span></span>

<span data-ttu-id="fc74b-107">Powinno to być proste w przypadku aplikacji korzystających z DbContext jako dostarczonych w EF 4,1 i nowszych.</span><span class="sxs-lookup"><span data-stu-id="fc74b-107">This should be straightforward for applications that make use of DbContext as shipped in EF 4.1 and later.</span></span> <span data-ttu-id="fc74b-108">W przypadku aplikacji korzystających z obiektu ObjectContext wymagana jest nieco większa ilość pracy, ale nadal nie jest to trudne do wykonania.</span><span class="sxs-lookup"><span data-stu-id="fc74b-108">A little more work is required for applications that make use of ObjectContext but it still isn’t hard to do.</span></span>

<span data-ttu-id="fc74b-109">Poniżej znajduje się lista kontrolna czynności, które należy wykonać, aby uaktualnić istniejącą aplikację do programu EF6.</span><span class="sxs-lookup"><span data-stu-id="fc74b-109">Here is a checklist of the things you need to do to upgrade an existing application to EF6.</span></span>

## <a name="1-install-the-ef6-nuget-package"></a><span data-ttu-id="fc74b-110">1. Zainstaluj pakiet NuGet EF6</span><span class="sxs-lookup"><span data-stu-id="fc74b-110">1. Install the EF6 NuGet package</span></span>

<span data-ttu-id="fc74b-111">Należy uaktualnić do nowego środowiska uruchomieniowego Entity Framework 6.</span><span class="sxs-lookup"><span data-stu-id="fc74b-111">You need to upgrade to the new Entity Framework 6 runtime.</span></span>

1. <span data-ttu-id="fc74b-112">Kliknij prawym przyciskiem myszy projekt i wybierz pozycję **Zarządzaj pakietami NuGet...**</span><span class="sxs-lookup"><span data-stu-id="fc74b-112">Right-click on your project and select **Manage NuGet Packages...**</span></span>  
2. <span data-ttu-id="fc74b-113">Na karcie **online** wybierz pozycję **EntityFramework** , a następnie kliknij pozycję **Instaluj** .</span><span class="sxs-lookup"><span data-stu-id="fc74b-113">Under the **Online** tab select **EntityFramework** and click **Install**</span></span>  
   > [!NOTE]
   > <span data-ttu-id="fc74b-114">Jeśli zainstalowano poprzednią wersję pakietu NuGet EntityFramework, spowoduje to uaktualnienie do EF6.</span><span class="sxs-lookup"><span data-stu-id="fc74b-114">If a previous version of the EntityFramework NuGet package was installed this will upgrade it to EF6.</span></span>

<span data-ttu-id="fc74b-115">Alternatywnie można uruchomić następujące polecenie z poziomu konsoli Menedżera pakietów:</span><span class="sxs-lookup"><span data-stu-id="fc74b-115">Alternatively, you can run the following command from Package Manager Console:</span></span>

``` powershell
Install-Package EntityFramework
```

## <a name="2-ensure-that-assembly-references-to-systemdataentitydll-are-removed"></a><span data-ttu-id="fc74b-116">2. Upewnij się, że odwołania do zestawu System. Data. Entity. dll zostały usunięte.</span><span class="sxs-lookup"><span data-stu-id="fc74b-116">2. Ensure that assembly references to System.Data.Entity.dll are removed</span></span>

<span data-ttu-id="fc74b-117">Zainstalowanie pakietu NuGet EF6 powinno automatycznie usunąć wszystkie odwołania do elementu System. Data. Entity z projektu.</span><span class="sxs-lookup"><span data-stu-id="fc74b-117">Installing the EF6 NuGet package should automatically remove any references to System.Data.Entity from your project for you.</span></span>

## <a name="3-swap-any-ef-designer-edmx-models-to-use-ef-6x-code-generation"></a><span data-ttu-id="fc74b-118">3. Zamień wszystkie modele EF Designer (EDMX), aby używać generowania kodu Dr 6. x</span><span class="sxs-lookup"><span data-stu-id="fc74b-118">3. Swap any EF Designer (EDMX) models to use EF 6.x code generation</span></span>

<span data-ttu-id="fc74b-119">Jeśli masz jakieś modele utworzone za pomocą narzędzia Dr Designer, musisz zaktualizować szablony generowania kodu, aby wygenerować kod zgodny z EF6.</span><span class="sxs-lookup"><span data-stu-id="fc74b-119">If you have any models created with the EF Designer, you will need to update the code generation templates to generate EF6 compatible code.</span></span>

> [!NOTE]
> <span data-ttu-id="fc74b-120">Obecnie dostępne są szablony generatora DbContext w programie Dr 6. x dla programu Visual Studio 2012 i 2013.</span><span class="sxs-lookup"><span data-stu-id="fc74b-120">There are currently only EF 6.x DbContext Generator templates available for Visual Studio 2012 and 2013.</span></span>

1. <span data-ttu-id="fc74b-121">Usuń istniejące szablony generowania kodu.</span><span class="sxs-lookup"><span data-stu-id="fc74b-121">Delete existing code-generation templates.</span></span> <span data-ttu-id="fc74b-122">Te pliki mają zwykle nazwę **@no__t -1edmx_file_name\>.tt** i **\<edmx_file_name @ no__t-5. Context.tt** i być zagnieżdżone w pliku edmx w Eksplorator rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="fc74b-122">These files will typically be named **\<edmx_file_name\>.tt** and **\<edmx_file_name\>.Context.tt** and be nested under your edmx file in Solution Explorer.</span></span> <span data-ttu-id="fc74b-123">Możesz wybrać Szablony w Eksplorator rozwiązań i nacisnąć klawisz **del** , aby je usunąć.</span><span class="sxs-lookup"><span data-stu-id="fc74b-123">You can select the templates in Solution Explorer and press the **Del** key to delete them.</span></span>  
   > [!NOTE]
   > <span data-ttu-id="fc74b-124">W projektach witryn sieci Web szablony nie będą zagnieżdżone w pliku edmx, ale wymienione obok niego w Eksplorator rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="fc74b-124">In Web Site projects the templates will not be nested under your edmx file, but listed alongside it in Solution Explorer.</span></span>  

   > [!NOTE]
   > <span data-ttu-id="fc74b-125">W projektach VB.NET należy włączyć opcję "Pokaż wszystkie pliki", aby można było zobaczyć pliki szablonów zagnieżdżonych.</span><span class="sxs-lookup"><span data-stu-id="fc74b-125">In VB.NET projects you will need to enable 'Show All Files' to be able to see the nested template files.</span></span>
2. <span data-ttu-id="fc74b-126">Dodaj odpowiedni szablon generowania kodu dla programu EF 6. x.</span><span class="sxs-lookup"><span data-stu-id="fc74b-126">Add the appropriate EF 6.x code generation template.</span></span> <span data-ttu-id="fc74b-127">Otwórz model w projektancie EF, kliknij prawym przyciskiem myszy powierzchnię projektu i wybierz polecenie **Dodaj element generowania kodu...**</span><span class="sxs-lookup"><span data-stu-id="fc74b-127">Open your model in the EF Designer, right-click on the design surface and select **Add Code Generation Item...**</span></span>
    - <span data-ttu-id="fc74b-128">Jeśli używasz interfejsu API DbContext (zalecane), a następnie na karcie **dane** będzie dostępna usługa **Dr 6. x DbContext Generator** .</span><span class="sxs-lookup"><span data-stu-id="fc74b-128">If you are using the DbContext API (recommended) then **EF 6.x DbContext Generator** will be available under the **Data** tab.</span></span>  
      > [!NOTE]
      > <span data-ttu-id="fc74b-129">W przypadku korzystania z programu Visual Studio 2012 należy zainstalować narzędzia Dr 6, aby mieć ten szablon.</span><span class="sxs-lookup"><span data-stu-id="fc74b-129">If you are using Visual Studio 2012, you will need to install the EF 6 Tools to have this template.</span></span> <span data-ttu-id="fc74b-130">Aby uzyskać szczegółowe informacje, zobacz [pobieranie Entity Framework](~/ef6/fundamentals/install.md) .</span><span class="sxs-lookup"><span data-stu-id="fc74b-130">See [Get Entity Framework](~/ef6/fundamentals/install.md) for details.</span></span>  

    - <span data-ttu-id="fc74b-131">Jeśli używasz interfejsu API ObjectContext, musisz wybrać kartę **online** i wyszukać **generatora EntityObject programu EF 6. x**.</span><span class="sxs-lookup"><span data-stu-id="fc74b-131">If you are using the ObjectContext API then you will need to select the **Online** tab and search for **EF 6.x EntityObject Generator**.</span></span>  
3. <span data-ttu-id="fc74b-132">W przypadku zastosowania dowolnych dostosowań do szablonów generowania kodu należy je ponownie zastosować do zaktualizowanych szablonów.</span><span class="sxs-lookup"><span data-stu-id="fc74b-132">If you applied any customizations to the code generation templates you will need to re-apply them to the updated templates.</span></span>

## <a name="4-update-namespaces-for-any-core-ef-types-being-used"></a><span data-ttu-id="fc74b-133">4. Aktualizuj przestrzenie nazw dla wszystkich używanych podstawowych typów EF</span><span class="sxs-lookup"><span data-stu-id="fc74b-133">4. Update namespaces for any core EF types being used</span></span>

<span data-ttu-id="fc74b-134">Przestrzenie nazw dla typów DbContext i Code First nie uległy zmianie.</span><span class="sxs-lookup"><span data-stu-id="fc74b-134">The namespaces for DbContext and Code First types have not changed.</span></span> <span data-ttu-id="fc74b-135">Oznacza to, że dla wielu aplikacji używających EF 4,1 lub nowszych nie trzeba zmieniać żadnych elementów.</span><span class="sxs-lookup"><span data-stu-id="fc74b-135">This means for many applications that use EF 4.1 or later you will not need to change anything.</span></span>

<span data-ttu-id="fc74b-136">Typy takie jak ObjectContext, które wcześniej znajdowały się w System. Data. Entity. dll, zostały przeniesione do nowych przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="fc74b-136">Types like ObjectContext that were previously in System.Data.Entity.dll have been moved to new namespaces.</span></span> <span data-ttu-id="fc74b-137">Oznacza to, że może być konieczne zaktualizowanie dyrektywy *using* lub *Import* , aby kompilować z Ef6.</span><span class="sxs-lookup"><span data-stu-id="fc74b-137">This means you may need to update your *using* or *Import* directives to build against EF6.</span></span>

<span data-ttu-id="fc74b-138">Ogólna reguła dotycząca zmian przestrzeni nazw polega na tym, że dowolny typ w System. Data. \* jest przenoszony do System. Data. Entity. Core. \*.</span><span class="sxs-lookup"><span data-stu-id="fc74b-138">The general rule for namespace changes is that any type in System.Data.\* is moved to System.Data.Entity.Core.\*.</span></span> <span data-ttu-id="fc74b-139">Innymi słowy, po prostu Wstaw **jednostkę Entity. Core.**</span><span class="sxs-lookup"><span data-stu-id="fc74b-139">In other words, just insert **Entity.Core.**</span></span> <span data-ttu-id="fc74b-140">po elemencie System. Data.</span><span class="sxs-lookup"><span data-stu-id="fc74b-140">after System.Data.</span></span> <span data-ttu-id="fc74b-141">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="fc74b-141">For example:</span></span>

- <span data-ttu-id="fc74b-142">System. Data. EntityException = > System. Data. **Entity. Core**. EntityException</span><span class="sxs-lookup"><span data-stu-id="fc74b-142">System.Data.EntityException => System.Data.**Entity.Core**.EntityException</span></span>  
- <span data-ttu-id="fc74b-143">System. Data. Objects. ObjectContext = > System. Data. **Entity. Core**. Obiekty. ObjectContext</span><span class="sxs-lookup"><span data-stu-id="fc74b-143">System.Data.Objects.ObjectContext => System.Data.**Entity.Core**.Objects.ObjectContext</span></span>  
- <span data-ttu-id="fc74b-144">System. Data. Objects. DataClasses. RelationshipManager = > System. Data. **Entity. Core**. Obiekty. DataClasses. RelationshipManager</span><span class="sxs-lookup"><span data-stu-id="fc74b-144">System.Data.Objects.DataClasses.RelationshipManager => System.Data.**Entity.Core**.Objects.DataClasses.RelationshipManager</span></span>  

<span data-ttu-id="fc74b-145">Te typy znajdują się w *podstawowych* obszarach nazw, ponieważ nie są używane bezpośrednio dla większości aplikacji opartych na kontekście DbContext.</span><span class="sxs-lookup"><span data-stu-id="fc74b-145">These types are in the *Core* namespaces because they are not used directly for most DbContext-based applications.</span></span> <span data-ttu-id="fc74b-146">Niektóre typy, które były częścią elementu System. Data. Entity. dll, są nadal używane często i bezpośrednio dla aplikacji opartych na kontekście DbContext, dlatego nie zostały przeniesione do *podstawowych* przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="fc74b-146">Some types that were part of System.Data.Entity.dll are still used commonly and directly for DbContext-based applications and so have not been moved into the *Core* namespaces.</span></span> <span data-ttu-id="fc74b-147">Są to:</span><span class="sxs-lookup"><span data-stu-id="fc74b-147">These are:</span></span>

- <span data-ttu-id="fc74b-148">System. Data. EntityState = > System. Data. **Jednostka**. EntityState</span><span class="sxs-lookup"><span data-stu-id="fc74b-148">System.Data.EntityState => System.Data.**Entity**.EntityState</span></span>  
- <span data-ttu-id="fc74b-149">System. Data. Objects. DataClasses. EdmFunctionAttribute = > System. Data. **Entity. Dbfunctionattribute**</span><span class="sxs-lookup"><span data-stu-id="fc74b-149">System.Data.Objects.DataClasses.EdmFunctionAttribute => System.Data.**Entity.DbFunctionAttribute**</span></span>  
  > [!NOTE]
  > <span data-ttu-id="fc74b-150">Nazwa tej klasy została zmieniona; Klasa ze starą nazwą nadal istnieje i działa, ale teraz jest oznaczona jako przestarzała.</span><span class="sxs-lookup"><span data-stu-id="fc74b-150">This class has been renamed; a class with the old name still exists and works, but it now marked as obsolete.</span></span>  
- <span data-ttu-id="fc74b-151">System. Data. Objects. EntityFunctions = > System. Data. **Entity.** DB— funkcje</span><span class="sxs-lookup"><span data-stu-id="fc74b-151">System.Data.Objects.EntityFunctions => System.Data.**Entity.DbFunctions**</span></span>  
  > [!NOTE]
  > <span data-ttu-id="fc74b-152">Nazwa tej klasy została zmieniona; Klasa ze starą nazwą nadal istnieje i działa, ale teraz jest oznaczona jako przestarzała.</span><span class="sxs-lookup"><span data-stu-id="fc74b-152">This class has been renamed; a class with the old name still exists and works, but it now marked as obsolete.)</span></span>  
- <span data-ttu-id="fc74b-153">Klasy przestrzenne (na przykład DbGeography, DbGeometry) zostały przeniesione z elementu System. Data. przestrzenny = > System. Data. **Jednostka**. Przestrzennych</span><span class="sxs-lookup"><span data-stu-id="fc74b-153">Spatial classes (for example, DbGeography, DbGeometry) have moved from System.Data.Spatial => System.Data.**Entity**.Spatial</span></span>

> [!NOTE]
> <span data-ttu-id="fc74b-154">Niektóre typy w przestrzeni nazw System. Data są w pliku System. Data. dll, który nie jest zestawem EF.</span><span class="sxs-lookup"><span data-stu-id="fc74b-154">Some types in the System.Data namespace are in System.Data.dll which is not an EF assembly.</span></span> <span data-ttu-id="fc74b-155">Te typy nie zostały przeniesione i dlatego ich przestrzenie nazw pozostaną niezmienione.</span><span class="sxs-lookup"><span data-stu-id="fc74b-155">These types have not moved and so their namespaces remain unchanged.</span></span>
