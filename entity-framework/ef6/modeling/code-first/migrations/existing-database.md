---
title: Migracje Code First z istniejącą bazą danych — EF6
author: divega
ms.date: 10/23/2016
ms.assetid: f0cc4f93-67dd-4664-9753-0a9f913814db
ms.openlocfilehash: eb7948eafb1322cabcf69b47bd5411f762fe8498
ms.sourcegitcommit: 708b18520321c587b2046ad2ea9fa7c48aeebfe5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/09/2019
ms.locfileid: "72182582"
---
# <a name="code-first-migrations-with-an-existing-database"></a><span data-ttu-id="33d6e-102">Migracje Code First z istniejącą bazą danych</span><span class="sxs-lookup"><span data-stu-id="33d6e-102">Code First Migrations with an existing database</span></span>
> [!NOTE]
> <span data-ttu-id="33d6e-103">**Ef 4.3 tylko** — funkcje, interfejsy API itp. omówione na tej stronie zostały wprowadzone w Entity Framework 4,1.</span><span class="sxs-lookup"><span data-stu-id="33d6e-103">**EF4.3 Onwards Only** - The features, APIs, etc. discussed in this page were introduced in Entity Framework 4.1.</span></span> <span data-ttu-id="33d6e-104">Jeśli używasz wcześniejszej wersji, niektóre lub wszystkie informacje nie są stosowane.</span><span class="sxs-lookup"><span data-stu-id="33d6e-104">If you are using an earlier version, some or all of the information does not apply.</span></span>

<span data-ttu-id="33d6e-105">W tym artykule omówiono używanie Migracje Code First z istniejącą bazą danych, która nie została utworzona przez Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="33d6e-105">This article covers using Code First Migrations with an existing database, one that wasn’t created by Entity Framework.</span></span>

> [!NOTE]
> <span data-ttu-id="33d6e-106">W tym artykule założono, że wiesz, jak używać Migracje Code First w podstawowych scenariuszach.</span><span class="sxs-lookup"><span data-stu-id="33d6e-106">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="33d6e-107">Jeśli tego nie zrobisz, musisz przeczytać [migracje Code First](~/ef6/modeling/code-first/migrations/index.md) przed kontynuowaniem.</span><span class="sxs-lookup"><span data-stu-id="33d6e-107">If you don’t, then you’ll need to read [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) before continuing.</span></span>

## <a name="screencasts"></a><span data-ttu-id="33d6e-108">Screencasts</span><span class="sxs-lookup"><span data-stu-id="33d6e-108">Screencasts</span></span>

<span data-ttu-id="33d6e-109">Jeśli wolisz obejrzeć zrzut ekranu przedstawiający niż odczytanie tego artykułu, następujące dwa wideo obejmują tę samą zawartość co ten artykuł.</span><span class="sxs-lookup"><span data-stu-id="33d6e-109">If you'd rather watch a screencast than read this article, the following two videos cover the same content as this article.</span></span>

### <a name="video-one-migrations---under-the-hood"></a><span data-ttu-id="33d6e-110">Wideo one: "migracje — pod okapem"</span><span class="sxs-lookup"><span data-stu-id="33d6e-110">Video One: "Migrations - Under the Hood"</span></span>

<span data-ttu-id="33d6e-111">[Ten zrzut ekranu przedstawiający](https://channel9.msdn.com/blogs/ef/migrations-under-the-hood) dotyczy sposobu, w jaki migracja śledzi i używa informacji o modelu do wykrywania zmian modelu.</span><span class="sxs-lookup"><span data-stu-id="33d6e-111">[This screencast](https://channel9.msdn.com/blogs/ef/migrations-under-the-hood) covers how migrations tracks and uses information about the model to detect model changes.</span></span>

### <a name="video-two-migrations---existing-databases"></a><span data-ttu-id="33d6e-112">Wideo dwa: "migracje — istniejące bazy danych"</span><span class="sxs-lookup"><span data-stu-id="33d6e-112">Video Two: "Migrations - Existing Databases"</span></span>

<span data-ttu-id="33d6e-113">W [tym zrzut ekranu przedstawiający](https://channel9.msdn.com/blogs/ef/migrations-existing-databases) omówiono sposób włączania i używania migracji z istniejącą bazą danych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-113">Building on the concepts from the previous video, [this screencast](https://channel9.msdn.com/blogs/ef/migrations-existing-databases) covers how to enable and use migrations with an existing database.</span></span>

## <a name="step-1-create-a-model"></a><span data-ttu-id="33d6e-114">Krok 1. Tworzenie modelu</span><span class="sxs-lookup"><span data-stu-id="33d6e-114">Step 1: Create a model</span></span>

<span data-ttu-id="33d6e-115">Pierwszym krokiem będzie utworzenie modelu Code First, który jest przeznaczony dla istniejącej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-115">Your first step will be to create a Code First model that targets your existing database.</span></span> <span data-ttu-id="33d6e-116">[Code First do istniejącego tematu bazy danych](~/ef6/modeling/code-first/workflows/existing-database.md) zawiera szczegółowe wskazówki na temat tego, jak to zrobić.</span><span class="sxs-lookup"><span data-stu-id="33d6e-116">The [Code First to an Existing Database](~/ef6/modeling/code-first/workflows/existing-database.md) topic provides detailed guidance on how to do this.</span></span>

>[!NOTE]
> <span data-ttu-id="33d6e-117">Należy postępować zgodnie z pozostałymi krokami tego tematu przed wprowadzeniem jakichkolwiek zmian w modelu, które wymagają zmian w schemacie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-117">It is important to follow the rest of the steps in this topic before making any changes to your model that would require changes to the database schema.</span></span> <span data-ttu-id="33d6e-118">Poniższe kroki wymagają, aby model był zsynchronizowany ze schematem bazy danych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-118">The following steps require the model to be in-sync with the database schema.</span></span>

## <a name="step-2-enable-migrations"></a><span data-ttu-id="33d6e-119">Krok 2. Włączanie migracji</span><span class="sxs-lookup"><span data-stu-id="33d6e-119">Step 2: Enable Migrations</span></span>

<span data-ttu-id="33d6e-120">Następnym krokiem jest włączenie migracji.</span><span class="sxs-lookup"><span data-stu-id="33d6e-120">The next step is to enable migrations.</span></span> <span data-ttu-id="33d6e-121">Można to zrobić, uruchamiając polecenie **enable-migrations** w konsoli Menedżera pakietów.</span><span class="sxs-lookup"><span data-stu-id="33d6e-121">You can do this by running the **Enable-Migrations** command in Package Manager Console.</span></span>

<span data-ttu-id="33d6e-122">To polecenie spowoduje utworzenie folderu w rozwiązaniu o nazwie migrations i umieszczenie w nim pojedynczej klasy o nazwie Konfiguracja.</span><span class="sxs-lookup"><span data-stu-id="33d6e-122">This command will create a folder in your solution called Migrations, and put a single class inside it called Configuration.</span></span> <span data-ttu-id="33d6e-123">W klasie konfiguracji można skonfigurować migracje dla aplikacji, aby uzyskać więcej informacji na jej temat w temacie [migracje Code First](~/ef6/modeling/code-first/migrations/index.md) .</span><span class="sxs-lookup"><span data-stu-id="33d6e-123">The Configuration class is where you configure migrations for your application, you can find out more about it in the [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) topic.</span></span>

## <a name="step-3-add-an-initial-migration"></a><span data-ttu-id="33d6e-124">Krok 3. Dodawanie początkowej migracji</span><span class="sxs-lookup"><span data-stu-id="33d6e-124">Step 3: Add an initial migration</span></span>

<span data-ttu-id="33d6e-125">Po utworzeniu i zastosowaniu migracji do lokalnej bazy danych można również zastosować te zmiany do innych baz danych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-125">Once migrations have been created and applied to the local database you may also want to apply these changes to other databases.</span></span> <span data-ttu-id="33d6e-126">Na przykład lokalna baza danych może być testową bazą danych i możesz ostatecznie chcieć zastosować zmiany do produkcyjnej bazy danych i/lub innych deweloperów testowych baz danych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-126">For example, your local database may be a test database and you may ultimately want to also apply the changes to a production database and/or other developers test databases.</span></span> <span data-ttu-id="33d6e-127">Dostępne są dwie opcje tego kroku, a ten, który należy wybrać, zależy od tego, czy schemat innych baz danych jest pusty czy jest obecnie zgodny ze schematem lokalnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-127">There are two options for this step and the one you should pick depends whether or not the schema of any other databases is empty or currently matches the schema of the local database.</span></span>

-   <span data-ttu-id="33d6e-128">**Opcja 1: Użyj istniejącego schematu jako punktu początkowego.**</span><span class="sxs-lookup"><span data-stu-id="33d6e-128">**Option One: Use existing schema as starting point.**</span></span> <span data-ttu-id="33d6e-129">Należy użyć tej metody, gdy w przyszłości zostaną zastosowane inne bazy danych, do których migracja zostanie zastosowana, będzie mieć taki sam schemat jak lokalna baza danych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-129">You should use this approach when other databases that migrations will be applied to in the future will have the same schema as your local database currently has.</span></span> <span data-ttu-id="33d6e-130">Na przykład możesz użyć tego ustawienia, jeśli lokalna baza danych testowa jest obecnie zgodna z wersją 1 w produkcyjnej bazie danych i później zostaną zastosowane te migracje w celu zaktualizowania produkcyjnej bazy danych do wersji 2.</span><span class="sxs-lookup"><span data-stu-id="33d6e-130">For example, you might use this if your local test database currently matches v1 of your production database and you will later apply these migrations to update your production database to v2.</span></span>
-   <span data-ttu-id="33d6e-131">**Opcja 2: Użyj pustej bazy danych jako punktu początkowego.**</span><span class="sxs-lookup"><span data-stu-id="33d6e-131">**Option Two: Use empty database as starting point.**</span></span> <span data-ttu-id="33d6e-132">Należy użyć tej metody, gdy inne bazy danych, do których zostaną zastosowane migracje, są puste (lub jeszcze nie istnieją).</span><span class="sxs-lookup"><span data-stu-id="33d6e-132">You should use this approach when other databases that migrations will be applied to in the future are empty (or do not exist yet).</span></span> <span data-ttu-id="33d6e-133">Można to na przykład użyć, jeśli rozpoczęto tworzenie aplikacji przy użyciu testowej bazy danych, ale bez użycia migracji, a później utworzysz produkcyjną bazę danych od podstaw.</span><span class="sxs-lookup"><span data-stu-id="33d6e-133">For example, you might use this if you started developing your application using a test database but without using migrations and you will later want to create a production database from scratch.</span></span>

### <a name="option-one-use-existing-schema-as-a-starting-point"></a><span data-ttu-id="33d6e-134">Opcja 1: Użyj istniejącego schematu jako punktu początkowego</span><span class="sxs-lookup"><span data-stu-id="33d6e-134">Option One: Use existing schema as a starting point</span></span>

<span data-ttu-id="33d6e-135">Migracje Code First używa migawki modelu przechowywanego w najnowszej migracji w celu wykrywania zmian w modelu (szczegółowe informacje na ten temat można znaleźć w [migracje Code First w środowiskach zespołu](~/ef6/modeling/code-first/migrations/teams.md)).</span><span class="sxs-lookup"><span data-stu-id="33d6e-135">Code First Migrations uses a snapshot of the model stored in the most recent migration to detect changes to the model (you can find detailed information about this in [Code First Migrations in Team Environments](~/ef6/modeling/code-first/migrations/teams.md)).</span></span> <span data-ttu-id="33d6e-136">Ponieważ chcemy założyć, że bazy danych mają już schemat bieżącego modelu, firma Microsoft wygeneruje pustą migrację (No-op), która ma bieżący model jako migawkę.</span><span class="sxs-lookup"><span data-stu-id="33d6e-136">Since we are going to assume that databases already have the schema of the current model, we will generate an empty (no-op) migration that has the current model as a snapshot.</span></span>

1.  <span data-ttu-id="33d6e-137">Uruchom polecenie **Add-Migration InitialCreate – IgnoreChanges** w konsoli Menedżera pakietów.</span><span class="sxs-lookup"><span data-stu-id="33d6e-137">Run the **Add-Migration InitialCreate –IgnoreChanges** command in Package Manager Console.</span></span> <span data-ttu-id="33d6e-138">Spowoduje to utworzenie pustej migracji z bieżącym modelem jako migawką.</span><span class="sxs-lookup"><span data-stu-id="33d6e-138">This creates an empty migration with the current model as a snapshot.</span></span>
2.  <span data-ttu-id="33d6e-139">Uruchom polecenie **Update-Database** w konsoli Menedżera pakietów.</span><span class="sxs-lookup"><span data-stu-id="33d6e-139">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="33d6e-140">Spowoduje to zastosowanie migracji InitialCreate do bazy danych programu.</span><span class="sxs-lookup"><span data-stu-id="33d6e-140">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="33d6e-141">Ponieważ rzeczywista migracja nie zawiera żadnych zmian, po prostu dodaje wiersz do \_\_tabeli MigrationsHistory wskazującej, że migracja została już zastosowana.</span><span class="sxs-lookup"><span data-stu-id="33d6e-141">Since the actual migration doesn’t contain any changes, it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>

### <a name="option-two-use-empty-database-as-a-starting-point"></a><span data-ttu-id="33d6e-142">Opcja 2: Użyj pustej bazy danych jako punktu początkowego</span><span class="sxs-lookup"><span data-stu-id="33d6e-142">Option Two: Use empty database as a starting point</span></span>

<span data-ttu-id="33d6e-143">W tym scenariuszu potrzebujemy migracji, aby można było utworzyć całą bazę danych od podstaw — w tym tabele, które znajdują się już w lokalnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-143">In this scenario we need Migrations to be able to create the entire database from scratch – including the tables that are already present in our local database.</span></span> <span data-ttu-id="33d6e-144">Będziemy generować migrację InitialCreate, która obejmuje logikę do utworzenia istniejącego schematu.</span><span class="sxs-lookup"><span data-stu-id="33d6e-144">We’re going to generate an InitialCreate migration that includes logic to create the existing schema.</span></span> <span data-ttu-id="33d6e-145">Następnie wprowadzimy istniejącą bazę danych, która będzie wyglądać tak, jak ta migracja została już zastosowana.</span><span class="sxs-lookup"><span data-stu-id="33d6e-145">We’ll then make our existing database look like this migration has already been applied.</span></span>

1.  <span data-ttu-id="33d6e-146">Uruchom polecenie **Add-Migration InitialCreate** w konsoli Menedżera pakietów.</span><span class="sxs-lookup"><span data-stu-id="33d6e-146">Run the **Add-Migration InitialCreate** command in Package Manager Console.</span></span> <span data-ttu-id="33d6e-147">Spowoduje to utworzenie migracji, aby utworzyć istniejący schemat.</span><span class="sxs-lookup"><span data-stu-id="33d6e-147">This creates a migration to create the existing schema.</span></span>
2.  <span data-ttu-id="33d6e-148">Skomentuj cały kod w metodzie nowo utworzonej migracji.</span><span class="sxs-lookup"><span data-stu-id="33d6e-148">Comment out all code in the Up method of the newly created migration.</span></span> <span data-ttu-id="33d6e-149">Umożliwi to "zastosowanie" migracji do lokalnej bazy danych bez konieczności ponownego tworzenia wszystkich tabel itd.</span><span class="sxs-lookup"><span data-stu-id="33d6e-149">This will allow us to ‘apply’ the migration to the local database without trying to recreate all the tables etc. that already exist.</span></span>
3.  <span data-ttu-id="33d6e-150">Uruchom polecenie **Update-Database** w konsoli Menedżera pakietów.</span><span class="sxs-lookup"><span data-stu-id="33d6e-150">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="33d6e-151">Spowoduje to zastosowanie migracji InitialCreate do bazy danych programu.</span><span class="sxs-lookup"><span data-stu-id="33d6e-151">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="33d6e-152">Ponieważ rzeczywista migracja nie zawiera żadnych zmian (ponieważ tymczasowo Komentarze zostały uwzględnione), po prostu doda wiersz do \_\_tabeli MigrationsHistory wskazującej, że migracja została już zastosowana.</span><span class="sxs-lookup"><span data-stu-id="33d6e-152">Since the actual migration doesn’t contain any changes (because we temporarily commented them out), it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>
4.  <span data-ttu-id="33d6e-153">Odskomentuj kod w metodzie up.</span><span class="sxs-lookup"><span data-stu-id="33d6e-153">Un-comment the code in the Up method.</span></span> <span data-ttu-id="33d6e-154">Oznacza to, że w przypadku zastosowania tej migracji do przyszłych baz danych schemat, który już istniał w lokalnej bazie danych, zostanie utworzony przez migracje.</span><span class="sxs-lookup"><span data-stu-id="33d6e-154">This means that when this migration is applied to future databases, the schema that already existed in the local database will be created by migrations.</span></span>

## <a name="things-to-be-aware-of"></a><span data-ttu-id="33d6e-155">Zagadnienia, z którymi należy się zapoznać</span><span class="sxs-lookup"><span data-stu-id="33d6e-155">Things to be aware of</span></span>

<span data-ttu-id="33d6e-156">Należy pamiętać o kilku kwestiach dotyczących migracji do istniejącej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-156">There are a few things you need to be aware of when using Migrations against an existing database.</span></span>

### <a name="defaultcalculated-names-may-not-match-existing-schema"></a><span data-ttu-id="33d6e-157">Nazwy domyślne/obliczeniowe mogą być niezgodne z istniejącym schematem</span><span class="sxs-lookup"><span data-stu-id="33d6e-157">Default/calculated names may not match existing schema</span></span>

<span data-ttu-id="33d6e-158">Migracje jawnie określają nazwy kolumn i tabel podczas tworzenia szkieletu migracji.</span><span class="sxs-lookup"><span data-stu-id="33d6e-158">Migrations explicitly specifies names for columns and tables when it scaffolds a migrations.</span></span> <span data-ttu-id="33d6e-159">Istnieją jednak inne obiekty bazy danych, dla których migracja jest obliczana jako domyślna nazwa w przypadku stosowania migracji.</span><span class="sxs-lookup"><span data-stu-id="33d6e-159">However, there are other database objects that Migrations calculates a default name for when applying the migrations.</span></span> <span data-ttu-id="33d6e-160">Obejmuje to ograniczenia dotyczące indeksów i kluczy obcych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-160">This includes indexes and foreign key constraints.</span></span> <span data-ttu-id="33d6e-161">W przypadku określania wartości docelowej istniejący schemat te obliczone nazwy mogą nie odpowiadać tym, co rzeczywiście istnieje w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-161">When targeting an existing schema, these calculated names may not match what actually exists in your database.</span></span>

<span data-ttu-id="33d6e-162">Poniżej przedstawiono kilka przykładów, które należy wziąć pod uwagę:</span><span class="sxs-lookup"><span data-stu-id="33d6e-162">Here are some examples of when you need to be aware of this:</span></span>

<span data-ttu-id="33d6e-163">**Jeśli użyto opcji jeden: Użyj istniejącego schematu jako punktu początkowego od kroku 3:**</span><span class="sxs-lookup"><span data-stu-id="33d6e-163">**If you used ‘Option One: Use existing schema as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="33d6e-164">Jeśli przyszłe zmiany w modelu wymagają zmiany lub porzucenie jednego z obiektów bazy danych o nazwie inaczej, należy zmodyfikować migrację szkieletową, aby określić poprawną nazwę.</span><span class="sxs-lookup"><span data-stu-id="33d6e-164">If future changes in your model require changing or dropping one of the database objects that is named differently, you will need to modify the scaffolded migration to specify the correct name.</span></span> <span data-ttu-id="33d6e-165">Interfejsy API migracji mają opcjonalny parametr nazwy, który umożliwia wykonanie tej czynności.</span><span class="sxs-lookup"><span data-stu-id="33d6e-165">The Migrations APIs have an optional Name parameter that allows you to do this.</span></span>
    <span data-ttu-id="33d6e-166">Na przykład istniejący schemat może mieć tabelę ogłoszeń z kolumną klucza obcego BlogId, która ma indeks o nazwie IndexFk\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="33d6e-166">For example, your existing schema may have a Post table with a BlogId foreign key column that has an index named IndexFk\_BlogId.</span></span> <span data-ttu-id="33d6e-167">Jednak domyślnie migracje będą oczekiwać, że ten indeks ma nazwę IX\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="33d6e-167">However, by default Migrations would expect this index to be named IX\_BlogId.</span></span> <span data-ttu-id="33d6e-168">Jeśli wprowadzisz zmiany w modelu, który spowoduje porzucenie tego indeksu, musisz zmodyfikować wywołanie DropIndex szkieletowej, aby określić nazwę IndexFk\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="33d6e-168">If you make a change to your model that results in dropping this index, you will need to modify the scaffolded DropIndex call to specify the IndexFk\_BlogId name.</span></span>

<span data-ttu-id="33d6e-169">**Jeśli użyto opcji "Option dwa: Użyj pustej bazy danych jako punktu początkowego" z kroku 3:**</span><span class="sxs-lookup"><span data-stu-id="33d6e-169">**If you used ‘Option Two: Use empty database as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="33d6e-170">Próba uruchomienia metody w dół migracji początkowej (czyli przywrócenie pustej bazy danych) do lokalnej bazy danych może się nie powieść, ponieważ migracja podejmie próbę porzucenia indeksów i ograniczeń klucza obcego przy użyciu niepoprawnych nazw.</span><span class="sxs-lookup"><span data-stu-id="33d6e-170">Trying to run the Down method of the initial migration (that is, reverting to an empty database) against your local database may fail because Migrations will try to drop indexes and foreign key constraints using the incorrect names.</span></span> <span data-ttu-id="33d6e-171">Będzie to miało wpływ tylko na lokalną bazę danych, ponieważ inne bazy danych zostaną utworzone od początku przy użyciu metody początkowej migracji.</span><span class="sxs-lookup"><span data-stu-id="33d6e-171">This will only affect your local database since other databases will be created from scratch using the Up method of the initial migration.</span></span>
    <span data-ttu-id="33d6e-172">Jeśli chcesz obniżyć poziom istniejącej lokalnej bazy danych do pustego stanu, najłatwiej wykonać tę czynność ręcznie, usuwając bazę danych lub upuszczając wszystkie tabele.</span><span class="sxs-lookup"><span data-stu-id="33d6e-172">If you want to downgrade your existing local database to an empty state it is easiest to do this manually, either by dropping the database or dropping all the tables.</span></span> <span data-ttu-id="33d6e-173">Po rozpoczęciu wstępnego obniżenia poziomu wszystkie obiekty bazy danych zostaną ponownie utworzone przy użyciu nazw domyślnych, więc ten problem nie będzie już występować.</span><span class="sxs-lookup"><span data-stu-id="33d6e-173">After this initial downgrade all database objects will be recreated with the default names, so this issue will not present itself again.</span></span>
-   <span data-ttu-id="33d6e-174">Jeśli przyszłe zmiany w modelu wymagają zmiany lub porzucenie jednego z obiektów bazy danych o nazwie inaczej, nie będzie to możliwe w przypadku istniejącej lokalnej bazy danych — ponieważ nazwy nie będą zgodne z ustawieniami domyślnymi.</span><span class="sxs-lookup"><span data-stu-id="33d6e-174">If future changes in your model require changing or dropping one of the database objects that is named differently, this will not work against your existing local database – since the names won’t match the defaults.</span></span> <span data-ttu-id="33d6e-175">Jednak będzie ona działała względem baz danych, które zostały utworzone "od podstaw", ponieważ będą używały domyślnych nazw wybranych przez migracje.</span><span class="sxs-lookup"><span data-stu-id="33d6e-175">However, it will work against databases that were created ‘from scratch’ since they will have used the default names chosen by Migrations.</span></span>
    <span data-ttu-id="33d6e-176">Można wprowadzić te zmiany ręcznie w lokalnej istniejącej bazie danych lub rozważyć przeprowadzenie migracji od podstaw, tak jak w przypadku innych maszyn.</span><span class="sxs-lookup"><span data-stu-id="33d6e-176">You could either make these changes manually on your local existing database, or consider having Migrations recreate your database from scratch – as it will on other machines.</span></span>
-   <span data-ttu-id="33d6e-177">Bazy danych utworzone przy użyciu metody up migracji początkowej mogą się nieco różnić od lokalnej bazy danych, ponieważ obliczone domyślne nazwy indeksów i ograniczeń klucza obcego zostaną użyte.</span><span class="sxs-lookup"><span data-stu-id="33d6e-177">Databases created using the Up method of your initial migration may differ slightly from the local database since the calculated default names for indexes and foreign key constraints will be used.</span></span> <span data-ttu-id="33d6e-178">Możesz również zakończyć z dodatkowymi indeksami, ponieważ migracja domyślnie utworzy indeksy w kolumnach klucza obcego — może to nie być przypadek w pierwotnej lokalnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="33d6e-178">You may also end up with extra indexes as Migrations will create indexes on foreign key columns by default – this may not have been the case in your original local database.</span></span>

### <a name="not-all-database-objects-are-represented-in-the-model"></a><span data-ttu-id="33d6e-179">Nie wszystkie obiekty bazy danych są reprezentowane w modelu</span><span class="sxs-lookup"><span data-stu-id="33d6e-179">Not all database objects are represented in the model</span></span>

<span data-ttu-id="33d6e-180">Obiekty bazy danych, które nie są częścią modelu, nie będą obsługiwane przez migracje.</span><span class="sxs-lookup"><span data-stu-id="33d6e-180">Database objects that are not part of your model will not be handled by Migrations.</span></span> <span data-ttu-id="33d6e-181">Może to obejmować widoki, procedury składowane, uprawnienia, tabele, które nie są częścią modelu, dodatkowe indeksy itd.</span><span class="sxs-lookup"><span data-stu-id="33d6e-181">This can include views, stored procedures, permissions, tables that are not part of your model, additional indexes, etc.</span></span>

<span data-ttu-id="33d6e-182">Poniżej przedstawiono kilka przykładów, które należy wziąć pod uwagę:</span><span class="sxs-lookup"><span data-stu-id="33d6e-182">Here are some examples of when you need to be aware of this:</span></span>

-   <span data-ttu-id="33d6e-183">Bez względu na opcję wybraną w kroku 3, jeśli przyszłe zmiany w modelu wymagają zmiany lub porzucania tych dodatkowych obiektów migracja nie będzie wiadomo, że te zmiany zostaną wprowadzone.</span><span class="sxs-lookup"><span data-stu-id="33d6e-183">Regardless of the option you chose in ‘Step 3’, if future changes in your model require changing or dropping these additional objects Migrations will not know to make these changes.</span></span> <span data-ttu-id="33d6e-184">Na przykład jeśli porzucasz kolumnę z dodatkowym indeksem, migracja nie będzie wiadomo, aby usunąć indeks.</span><span class="sxs-lookup"><span data-stu-id="33d6e-184">For example, if you drop a column that has an additional index on it, Migrations will not know to drop the index.</span></span> <span data-ttu-id="33d6e-185">Należy ręcznie dodać to do migracji szkieletowej.</span><span class="sxs-lookup"><span data-stu-id="33d6e-185">You will need to manually add this to the scaffolded Migration.</span></span>
-   <span data-ttu-id="33d6e-186">Jeśli użyto opcji "Option dwa: Użyj pustej bazy danych jako punktu początkowego", te dodatkowe obiekty nie zostaną utworzone przy użyciu metody up początkowej migracji.</span><span class="sxs-lookup"><span data-stu-id="33d6e-186">If you used ‘Option Two: Use empty database as a starting point’, these additional objects will not be created by the Up method of your initial migration.</span></span>
    <span data-ttu-id="33d6e-187">Możesz zmodyfikować metody w górę i w dół, aby zadbać o te dodatkowe obiekty.</span><span class="sxs-lookup"><span data-stu-id="33d6e-187">You can modify the Up and Down methods to take care of these additional objects if you wish.</span></span> <span data-ttu-id="33d6e-188">W przypadku obiektów, które nie są natywnie obsługiwane w interfejsie API migracji — takich jak widoki — można użyć metody [SQL](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) do uruchomienia nieprzetworzonego SQL w celu utworzenia/porzucenia.</span><span class="sxs-lookup"><span data-stu-id="33d6e-188">For objects that are not natively supported in the Migrations API – such as views – you can use the [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) method to run raw SQL to create/drop them.</span></span>
